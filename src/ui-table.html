<polymer-element name="ui-cell" attributes="html">
  <content></content>
  <script>
    Polymer('ui-cell', {
      htmlChanged: function(){
        this.innerHTML = this.html;
      }
    })
  </script>
</polymer-element>

<polymer-element name="ui-table" attributes="rowClickReturn">

<template>
  <link rel="stylesheet" type="text/css" href="./ui-table.less">
  <link rel="stylesheet" href="../node_modules/ui-fonts/node_modules/ui-font-awesome/icons.less">
  <link rel="stylesheet" href="../node_modules/ui-fonts/node_modules/ui-font-awesome/font-awesome.less">
  <button hidden?="{{filtered == false}}" on-click="{{reset_filter}}" style="float:right;">Reset Filter</button>
  <button hidden?="{{itemSelected == undefined}}" on-click="{{filter_event}}" style="float:right;">Filter</button>
  <div id="search"><label>Search: </label><input id="searchText"></input><button id="searchButton" on-click="{{search_filter}}">Go</button></div>
  <table id="table" border="1" style="width:100%;">
    <thead>
      <template repeat="{{column, i in columns}}">
        <th hidden?="{{column.hidden == true}}" id="column_{{column.columnName}}" on-click="{{sort}}" hidden?="{{i == 0}}" style="position:relative"><span style="display: block;padding-right: 15px;position: relative;">{{column.columnName}}</span>
          <icon hidden?="{{column.columnName == sort_column}}" sort style="position: absolute;top: 10px;right: 10px;"></icon>
          <icon hidden?="{{column.columnName != sort_column || 0 == sort_order}}" sort-asc style="position: absolute;top: 10px;right: 10px;"></icon>
          <icon hidden?="{{column.columnName != sort_column || 1 == sort_order}}" sort-desc style="position: absolute;top: 10px;right: 10px;"></icon>
        </th>
      </template>
    </thead>
    <tbody>
      <template id="row" repeat="{{row, d in json.data}}">
        <tr id="row_{{d}}">
          <template repeat="{{column, i in columns}}">
            <td hidden?="{{shownColumns[i] == false}}" data-column="{{column.columnName}}" data-row="{{d}}" on-click="{{row_click_event}}" data="{{row[column.columnName] | getValue('data')}}">
              <template if="{{preDefColumns[i] == false}}">
                <content>{{row[column.columnName] | getValue('data')}}</content>
              </template>
              <template if="{{preDefColumns[i] == true}}">
                <ui-cell html="{{row[column.columnName] | getValue('html')}}"></ui-cell>
              </template>
            </td>
          </template>
        </tr>
      </template>
    </tbody>
  </table>
</template>
<script src="./ui-table.litcoffee"></script>
</polymer-element>